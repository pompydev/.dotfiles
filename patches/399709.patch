From 06f1997a259e9b2e94a4a6d980d770db9bfb7225 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?David=20Chocholat=C3=BD?= <chocholaty.david@protonmail.com>
Date: Fri, 18 Apr 2025 12:52:09 +0200
Subject: [PATCH 1/3] tantivy-go: 0.3.1 -> 1.0.1

---
 .../ta/tantivy-go/add-Cargo.lock.patch        | 692 +++++++++++-------
 pkgs/by-name/ta/tantivy-go/package.nix        |   6 +-
 2 files changed, 427 insertions(+), 271 deletions(-)

diff --git a/pkgs/by-name/ta/tantivy-go/add-Cargo.lock.patch b/pkgs/by-name/ta/tantivy-go/add-Cargo.lock.patch
index 9b974186d55b02..50fa59c3280712 100644
--- a/pkgs/by-name/ta/tantivy-go/add-Cargo.lock.patch
+++ b/pkgs/by-name/ta/tantivy-go/add-Cargo.lock.patch
@@ -1,12 +1,12 @@
 diff --git a/rust/Cargo.lock b/rust/Cargo.lock
 new file mode 100644
-index 0000000..942397e
+index 0000000..7cb3275
 --- /dev/null
 +++ b/rust/Cargo.lock
-@@ -0,0 +1,1609 @@
+@@ -0,0 +1,1762 @@
 +# This file is automatically @generated by Cargo.
 +# It is not intended for manual editing.
-+version = 3
++version = 4
 +
 +[[package]]
 +name = "adler32"
@@ -23,7 +23,7 @@ index 0000000..942397e
 + "cfg-if",
 + "once_cell",
 + "version_check",
-+ "zerocopy",
++ "zerocopy 0.7.35",
 +]
 +
 +[[package]]
@@ -82,11 +82,12 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "anstyle-wincon"
-+version = "3.0.6"
++version = "3.0.7"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "2109dbce0e72be3ec00bed26e6a7479ca384ad226efdd66db8fa2e3a38c83125"
++checksum = "ca3534e77181a9cc07539ad51f2141fe32f6c3ffd4df76db8ad92346b003ae4e"
 +dependencies = [
 + "anstyle",
++ "once_cell",
 + "windows-sys 0.59.0",
 +]
 +
@@ -98,13 +99,13 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "async-trait"
-+version = "0.1.83"
++version = "0.1.88"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "721cae7de5c34fbb2acd27e21e6d2cf7b886dce0c27388d46c4e6c47ea4318dd"
++checksum = "e539d3fca749fcee5236ab05e93a52867dd549cc157c8cb7f99595f3cedffdb5"
 +dependencies = [
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
@@ -121,9 +122,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "bitflags"
-+version = "2.6.0"
++version = "2.9.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "b048fb63fd8b5923fc5aa7b340d8e156aec7ec02f0c78fa8a6ddc2613f6f71de"
++checksum = "5c8214115b7bf84099f1309324e63141d4c5d7cc26862f97a0a857dbefe165bd"
 +
 +[[package]]
 +name = "bitpacking"
@@ -135,10 +136,29 @@ index 0000000..942397e
 +]
 +
 +[[package]]
-+name = "bumpalo"
-+version = "3.16.0"
++name = "bon"
++version = "3.6.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "79296716171880943b8470b5f8d03aa55eb2e645a4874bdbb28adb49162e012c"
++checksum = "94054366e2ff97b455acdd4fdb03913f717febc57b7bbd1741b2c3b87efae030"
++dependencies = [
++ "bon-macros",
++ "rustversion",
++]
++
++[[package]]
++name = "bon-macros"
++version = "3.6.1"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "542a990e676ce0a0a895ae54b2d94afd012434f2228a85b186c6bc1a7056cdc6"
++dependencies = [
++ "darling",
++ "ident_case",
++ "prettyplease",
++ "proc-macro2",
++ "quote",
++ "rustversion",
++ "syn 2.0.100",
++]
 +
 +[[package]]
 +name = "byteorder"
@@ -148,9 +168,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "cbindgen"
-+version = "0.27.0"
++version = "0.28.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "3fce8dd7fcfcbf3a0a87d8f515194b49d6135acab73e18bd380d1d93bb1a15eb"
++checksum = "eadd868a2ce9ca38de7eeafdcec9c7065ef89b42b32f0839278d55f35c54d1ff"
 +dependencies = [
 + "clap",
 + "heck",
@@ -160,16 +180,16 @@ index 0000000..942397e
 + "quote",
 + "serde",
 + "serde_json",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 + "tempfile",
 + "toml",
 +]
 +
 +[[package]]
 +name = "cc"
-+version = "1.2.6"
++version = "1.2.19"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "8d6dbb628b8f8555f86d0323c2eb39e3ec81901f4b83e091db8a6a76d316a333"
++checksum = "8e3a13707ac958681c13b39b458c073d0d9bc8a22cb1b2f4c8e55eb72c13f362"
 +dependencies = [
 + "jobserver",
 + "libc",
@@ -199,18 +219,18 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "clap"
-+version = "4.5.23"
++version = "4.5.36"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "3135e7ec2ef7b10c6ed8950f0f792ed96ee093fa088608f1c76e569722700c84"
++checksum = "2df961d8c8a0d08aa9945718ccf584145eee3f3aa06cddbeac12933781102e04"
 +dependencies = [
 + "clap_builder",
 +]
 +
 +[[package]]
 +name = "clap_builder"
-+version = "4.5.23"
++version = "4.5.36"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "30582fc632330df2bd26877bde0c1f4470d57c582bbc070376afcd04d8cb4838"
++checksum = "132dbda40fb6753878316a489d5a1242a8ef2f0d9e47ba01c951ea8aa7d013a5"
 +dependencies = [
 + "anstream",
 + "anstyle",
@@ -250,9 +270,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "crossbeam-channel"
-+version = "0.5.14"
++version = "0.5.15"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "06ba6d68e24814cb8de6bb986db8222d3a027d15872cabc0d18817bc3c0e4471"
++checksum = "82b8f8f868b36967f9606790d1903570de9ceaf870a7bf9fbbd3016d636a2cb2"
 +dependencies = [
 + "crossbeam-utils",
 +]
@@ -289,6 +309,41 @@ index 0000000..942397e
 +checksum = "7a81dae078cea95a014a339291cec439d2f232ebe854a9d672b796c6afafa9b7"
 +
 +[[package]]
++name = "darling"
++version = "0.20.11"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "fc7f46116c46ff9ab3eb1597a45688b6715c6e628b5c133e288e709a29bcb4ee"
++dependencies = [
++ "darling_core",
++ "darling_macro",
++]
++
++[[package]]
++name = "darling_core"
++version = "0.20.11"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "0d00b9596d185e565c2207a0b01f8bd1a135483d02d9b7b0a54b11da8d53412e"
++dependencies = [
++ "fnv",
++ "ident_case",
++ "proc-macro2",
++ "quote",
++ "strsim",
++ "syn 2.0.100",
++]
++
++[[package]]
++name = "darling_macro"
++version = "0.20.11"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "fc34b93ccb385b40dc71c6fceac4b2ad23662c7eeb248cf10d529b7e055b6ead"
++dependencies = [
++ "darling_core",
++ "quote",
++ "syn 2.0.100",
++]
++
++[[package]]
 +name = "dary_heap"
 +version = "0.3.7"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
@@ -296,9 +351,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "deranged"
-+version = "0.3.11"
++version = "0.4.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "b42b6fa04a440b495c8b04d0e71b707c585f83cb9cb28cf8cd0d976c315e31b4"
++checksum = "9c9e6a11ca8224451684bc0d7d5a7adbf8f2fd6887261a1cfc3c0432f9d4068e"
 +dependencies = [
 + "powerfmt",
 + "serde",
@@ -306,15 +361,15 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "downcast-rs"
-+version = "1.2.1"
++version = "2.0.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "75b325c5dbd37f80359721ad39aca5a29fb04c89279657cffdda8736d0c0b9d2"
++checksum = "ea8a8b81cacc08888170eef4d13b775126db426d0b348bee9d18c2c1eaf123cf"
 +
 +[[package]]
 +name = "either"
-+version = "1.13.0"
++version = "1.15.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "60b1af1c220855b6ceac025d3f6ecdd2b7c4894bfe9cd9bda4fbb4bc7c0d4cf0"
++checksum = "48c757948c5ede0e46177b7add2e67155f70e33c07fea8284df6576da70b3719"
 +
 +[[package]]
 +name = "env_filter"
@@ -328,28 +383,28 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "env_logger"
-+version = "0.11.6"
++version = "0.11.8"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "dcaee3d8e3cfc3fd92428d477bc97fc29ec8716d180c0d74c643bb26166660e0"
++checksum = "13c863f0904021b108aa8b2f55046443e6b1ebde8fd4a15c399893aae4fa069f"
 +dependencies = [
 + "anstream",
 + "anstyle",
 + "env_filter",
-+ "humantime",
++ "jiff",
 + "log",
 +]
 +
 +[[package]]
 +name = "equivalent"
-+version = "1.0.1"
++version = "1.0.2"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "5443807d6dff69373d433ab9ef5378ad8df50ca6298caf15de6e52e24aaf54d5"
++checksum = "877a4ace8713b0bcf2a4e7eec82529c029f1d0619886d18145fea96c3ffe5c0f"
 +
 +[[package]]
 +name = "errno"
-+version = "0.3.10"
++version = "0.3.11"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "33d852cb9b869c2a9b3df2f71a3074817f01e1844f839a144f5fcef059a4eb5d"
++checksum = "976dd42dc7e85965fe702eb8164f21f450704bdde31faefd6471dba214cb594e"
 +dependencies = [
 + "libc",
 + "windows-sys 0.59.0",
@@ -375,9 +430,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "foldhash"
-+version = "0.1.4"
++version = "0.1.5"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "a0d2fde1f7b3d48b8395d5f2de76c18a528bd6a9cdde438df747bfcba3e05d6f"
++checksum = "d9c4f5dac5e15c24eb999c26181a6ca40b39fe946cbe4c263c7209467bc83af2"
 +
 +[[package]]
 +name = "fs4"
@@ -385,11 +440,48 @@ index 0000000..942397e
 +source = "registry+https://github.com/rust-lang/crates.io-index"
 +checksum = "f7e180ac76c23b45e767bd7ae9579bc0bb458618c4bc71835926e098e61d15f8"
 +dependencies = [
-+ "rustix",
++ "rustix 0.38.44",
 + "windows-sys 0.52.0",
 +]
 +
 +[[package]]
++name = "futures-core"
++version = "0.3.31"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "05f29059c0c2090612e8d742178b0580d2dc940c837851ad723096f87af6663e"
++
++[[package]]
++name = "futures-macro"
++version = "0.3.31"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "162ee34ebcb7c64a8abebc059ce0fee27c2262618d7b60ed8faf72fef13c3650"
++dependencies = [
++ "proc-macro2",
++ "quote",
++ "syn 2.0.100",
++]
++
++[[package]]
++name = "futures-task"
++version = "0.3.31"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "f90f7dce0722e95104fcb095585910c0977252f286e354b5e3bd38902cd99988"
++
++[[package]]
++name = "futures-util"
++version = "0.3.31"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "9fa08315bb612088cc391249efdc3bc77536f16c91f6cf495e6fbe85b20a4a81"
++dependencies = [
++ "futures-core",
++ "futures-macro",
++ "futures-task",
++ "pin-project-lite",
++ "pin-utils",
++ "slab",
++]
++
++[[package]]
 +name = "fxhash"
 +version = "0.2.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
@@ -406,7 +498,19 @@ index 0000000..942397e
 +dependencies = [
 + "cfg-if",
 + "libc",
-+ "wasi",
++ "wasi 0.11.0+wasi-snapshot-preview1",
++]
++
++[[package]]
++name = "getrandom"
++version = "0.3.2"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "73fea8450eea4bac3940448fb7ae50d91f034f941199fcd9d909a5a07aa455f0"
++dependencies = [
++ "cfg-if",
++ "libc",
++ "r-efi",
++ "wasi 0.14.2+wasi-0.2.4",
 +]
 +
 +[[package]]
@@ -437,22 +541,25 @@ index 0000000..942397e
 +checksum = "95505c38b4572b2d910cecb0281560f54b440a19336cbbcb27bf6ce6adc6f5a8"
 +
 +[[package]]
-+name = "hermit-abi"
-+version = "0.3.9"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "d231dfb89cfffdbc30e7fc41579ed6066ad03abda9e567ccafae602b97ec5024"
-+
-+[[package]]
 +name = "htmlescape"
 +version = "0.3.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
 +checksum = "e9025058dae765dee5070ec375f591e2ba14638c63feff74f13805a72e523163"
 +
 +[[package]]
-+name = "humantime"
-+version = "2.1.0"
++name = "hyperloglogplus"
++version = "0.4.1"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "621debdf94dcac33e50475fdd76d34d5ea9c0362a834b9db08c3024696c1fbe3"
++dependencies = [
++ "serde",
++]
++
++[[package]]
++name = "ident_case"
++version = "1.0.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "9a3a5bfb195931eeb336b2a7b4d761daec841b97f947d34394601737a7bba5e4"
++checksum = "b9e0384b61958566e926dc50660321d12159025e767c18e043daf26b70104c39"
 +
 +[[package]]
 +name = "include-flate"
@@ -474,32 +581,20 @@ index 0000000..942397e
 + "libflate",
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
 +name = "indexmap"
-+version = "2.7.0"
++version = "2.9.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "62f822373a4fe84d4bb149bf54e584a7f4abec90e072ed49cda0edea5b95471f"
++checksum = "cea70ddb795996207ad57735b50c5982d8844f38ba9ee5f1aedcfb708a2aa11e"
 +dependencies = [
 + "equivalent",
 + "hashbrown 0.15.2",
 +]
 +
 +[[package]]
-+name = "instant"
-+version = "0.1.13"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "e0242819d153cba4b4b05a5a8f2a7e9bbf97b6055b2a002b395c96b5ff3c0222"
-+dependencies = [
-+ "cfg-if",
-+ "js-sys",
-+ "wasm-bindgen",
-+ "web-sys",
-+]
-+
-+[[package]]
 +name = "is_terminal_polyfill"
 +version = "1.70.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
@@ -507,18 +602,18 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "itertools"
-+version = "0.12.1"
++version = "0.14.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "ba291022dbbd398a455acf126c1e341954079855bc60dfdda641363bd6922569"
++checksum = "2b192c782037fadd9cfa75548310488aabdbf3d2da73885b31bd0abd03351285"
 +dependencies = [
 + "either",
 +]
 +
 +[[package]]
 +name = "itoa"
-+version = "1.0.14"
++version = "1.0.15"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "d75a2a4b1b190afb6f5425f10f6a8f959d2ea0b9c2b1d79553551850539e4674"
++checksum = "4a5f13b858c8d314ee3e8f639011f7ccefe71f97f96e50151fb991f267928e2c"
 +
 +[[package]]
 +name = "jieba-macros"
@@ -531,9 +626,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "jieba-rs"
-+version = "0.7.1"
++version = "0.7.2"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "9a77d0ae8831f870c4f6ffce310f708b5273ea2e7a88e6af770a10d1b4876311"
++checksum = "6d1bcad6332969e4d48ee568d430e14ee6dea70740c2549d005d87677ebefb0c"
 +dependencies = [
 + "cedarwood",
 + "fxhash",
@@ -545,22 +640,37 @@ index 0000000..942397e
 +]
 +
 +[[package]]
-+name = "jobserver"
-+version = "0.1.32"
++name = "jiff"
++version = "0.2.8"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "48d1dbcbbeb6a7fec7e059840aa538bd62aaccf972c7346c4d9d2059312853d0"
++checksum = "e5ad87c89110f55e4cd4dc2893a9790820206729eaf221555f742d540b0724a0"
 +dependencies = [
-+ "libc",
++ "jiff-static",
++ "log",
++ "portable-atomic",
++ "portable-atomic-util",
++ "serde",
 +]
 +
 +[[package]]
-+name = "js-sys"
-+version = "0.3.76"
++name = "jiff-static"
++version = "0.2.8"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "6717b6b5b077764fb5966237269cb3c64edddde4b14ce42647430a78ced9e7b7"
++checksum = "d076d5b64a7e2fe6f0743f02c43ca4a6725c0f904203bfe276a5b3e793103605"
 +dependencies = [
-+ "once_cell",
-+ "wasm-bindgen",
++ "proc-macro2",
++ "quote",
++ "syn 2.0.100",
++]
++
++[[package]]
++name = "jobserver"
++version = "0.1.33"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "38f262f097c174adebe41eb73d66ae9c06b2844fb0da69969647bbddd9b0538a"
++dependencies = [
++ "getrandom 0.3.2",
++ "libc",
 +]
 +
 +[[package]]
@@ -577,9 +687,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "libc"
-+version = "0.2.169"
++version = "0.2.172"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "b5aba8db14291edd000dfcc4d620c7ebfb122c613afb886ca8803fa4e128a20a"
++checksum = "d750af042f7ef4f724306de029d18836c26c1765a54a6a3f094cbd23a7267ffa"
 +
 +[[package]]
 +name = "libflate"
@@ -613,15 +723,21 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "linux-raw-sys"
-+version = "0.4.14"
++version = "0.4.15"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "d26c52dbd32dccf2d10cac7725f8eae5296885fb5703b261f7d0a0739ec807ab"
++
++[[package]]
++name = "linux-raw-sys"
++version = "0.9.4"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "78b3ae25bc7c8c38cec158d1f2757ee79e9b3740fbc7ccf0e59e4b08d793fa89"
++checksum = "cd945864f07fe9f5371a27ad7b52a172b4b499999f1d97574c9fa68373937e12"
 +
 +[[package]]
 +name = "log"
-+version = "0.4.22"
++version = "0.4.27"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "a7a70ba024b9dc04c27ea2f0c0548feb474ec5c54bba33a7f72f873a39d07b24"
++checksum = "13dc2df351e3202783a1fe0d44375f7295ffb4049267b0f3018346dc122a1d94"
 +
 +[[package]]
 +name = "logcall"
@@ -632,7 +748,7 @@ index 0000000..942397e
 + "proc-macro-error",
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
@@ -652,11 +768,10 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "measure_time"
-+version = "0.8.3"
++version = "0.9.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "dbefd235b0aadd181626f281e1d684e116972988c14c264e42069d5e8a5775cc"
++checksum = "51c55d61e72fc3ab704396c5fa16f4c184db37978ae4e94ca8959693a235fc0e"
 +dependencies = [
-+ "instant",
 + "log",
 +]
 +
@@ -714,50 +829,40 @@ index 0000000..942397e
 +]
 +
 +[[package]]
-+name = "num_cpus"
-+version = "1.16.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "4161fcb6d602d4d2081af7c3a45852d875a03dd337a6bfdd6e06407b61342a43"
-+dependencies = [
-+ "hermit-abi",
-+ "libc",
-+]
-+
-+[[package]]
 +name = "once_cell"
-+version = "1.20.2"
++version = "1.21.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "1261fe7e33c73b354eab43b1273a57c8f967d0391e80353e51f764ac02cf6775"
++checksum = "42f5e15c9953c5e4ccceeb2e7382a716482c34515315f7b03532b8b4e8393d2d"
 +
 +[[package]]
 +name = "oneshot"
-+version = "0.1.8"
++version = "0.1.11"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "e296cf87e61c9cfc1a61c3c63a0f7f286ed4554e0e22be84e8a38e1d264a2a29"
++checksum = "b4ce411919553d3f9fa53a0880544cda985a112117a0444d5ff1e870a893d6ea"
 +
 +[[package]]
 +name = "ownedbytes"
 +version = "0.7.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "c3a059efb063b8f425b948e042e6b9bd85edfe60e913630ed727b23e2dfcc558"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "stable_deref_trait",
 +]
 +
 +[[package]]
 +name = "phf"
-+version = "0.11.2"
++version = "0.11.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "ade2d8b8f33c7333b51bcf0428d37e217e9f32192ae4772156f65063b8ce03dc"
++checksum = "1fd6780a80ae0c52cc120a26a1a42c1ae51b247a253e4e06113d23d2c2edd078"
 +dependencies = [
++ "phf_macros",
 + "phf_shared",
 +]
 +
 +[[package]]
 +name = "phf_codegen"
-+version = "0.11.2"
++version = "0.11.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "e8d39688d359e6b34654d328e262234662d16cc0f60ec8dcbe5e718709342a5a"
++checksum = "aef8048c789fa5e851558d709946d6d79a8ff88c0440c587967f8e94bfb1216a"
 +dependencies = [
 + "phf_generator",
 + "phf_shared",
@@ -765,28 +870,68 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "phf_generator"
-+version = "0.11.2"
++version = "0.11.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "48e4cc64c2ad9ebe670cb8fd69dd50ae301650392e81c05f9bfcb2d5bdbc24b0"
++checksum = "3c80231409c20246a13fddb31776fb942c38553c51e871f8cbd687a4cfb5843d"
 +dependencies = [
 + "phf_shared",
 + "rand",
 +]
 +
 +[[package]]
++name = "phf_macros"
++version = "0.11.3"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "f84ac04429c13a7ff43785d75ad27569f2951ce0ffd30a3321230db2fc727216"
++dependencies = [
++ "phf_generator",
++ "phf_shared",
++ "proc-macro2",
++ "quote",
++ "syn 2.0.100",
++]
++
++[[package]]
 +name = "phf_shared"
-+version = "0.11.2"
++version = "0.11.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "90fcb95eef784c2ac79119d1dd819e162b5da872ce6f3c3abe1e8ca1c082f72b"
++checksum = "67eabc2ef2a60eb7faa00097bd1ffdb5bd28e62bf39990626a582201b7a754e5"
 +dependencies = [
 + "siphasher",
 +]
 +
 +[[package]]
++name = "pin-project-lite"
++version = "0.2.16"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "3b3cff922bd51709b605d9ead9aa71031d81447142d828eb4a6eba76fe619f9b"
++
++[[package]]
++name = "pin-utils"
++version = "0.1.0"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "8b870d8c151b6f2fb93e84a13146138f05d02ed11c7e7c54f8826aaaf7c9f184"
++
++[[package]]
 +name = "pkg-config"
-+version = "0.3.31"
++version = "0.3.32"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "7edddbd0b52d732b21ad9a5fab5c704c14cd949e5e9a1ec5929a24fded1b904c"
++
++[[package]]
++name = "portable-atomic"
++version = "1.11.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "953ec861398dccce10c670dfeaf3ec4911ca479e9c02154b3a215178c5f566f2"
++checksum = "350e9b48cbc6b0e028b0473b114454c6316e57336ee184ceab6e53f72c178b3e"
++
++[[package]]
++name = "portable-atomic-util"
++version = "0.2.4"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "d8a2f0d8d040d7848a709caf78912debcc3f33ee4b3cac47d73d1e1069e83507"
++dependencies = [
++ "portable-atomic",
++]
 +
 +[[package]]
 +name = "powerfmt"
@@ -796,11 +941,21 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "ppv-lite86"
-+version = "0.2.20"
++version = "0.2.21"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "77957b295656769bb8ad2b6a6b09d897d94f05c41b069aede1fcdaa675eaea04"
++checksum = "85eae3c4ed2f50dcfe72643da4befc30deadb458a9b590d720cde2f2b1e97da9"
 +dependencies = [
-+ "zerocopy",
++ "zerocopy 0.8.24",
++]
++
++[[package]]
++name = "prettyplease"
++version = "0.2.32"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "664ec5419c51e34154eec046ebcba56312d5a2fc3b09a06da188e1ad21afadf6"
++dependencies = [
++ "proc-macro2",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
@@ -829,23 +984,29 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "proc-macro2"
-+version = "1.0.92"
++version = "1.0.95"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "37d3544b3f2748c54e147655edb5025752e2303145b5aefb3c3ea2c78b973bb0"
++checksum = "02b3e5e68a3a1a02aad3ec490a98007cbc13c37cbe84a3cd7b8e406d76e7f778"
 +dependencies = [
 + "unicode-ident",
 +]
 +
 +[[package]]
 +name = "quote"
-+version = "1.0.38"
++version = "1.0.40"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "0e4dccaaaf89514f546c693ddc140f729f958c247918a13380cccc6078391acc"
++checksum = "1885c039570dc00dcb4ff087a89e185fd56bae234ddc7f056a945bf36467248d"
 +dependencies = [
 + "proc-macro2",
 +]
 +
 +[[package]]
++name = "r-efi"
++version = "5.2.0"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "74765f6d916ee2faa39bc8e68e4f3ed8949b48cccdac59983d287a7cb71ce9c5"
++
++[[package]]
 +name = "rand"
 +version = "0.8.5"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
@@ -872,7 +1033,7 @@ index 0000000..942397e
 +source = "registry+https://github.com/rust-lang/crates.io-index"
 +checksum = "ec0be4795e2f6a28069bec0b5ff3e2ac9bafc99e6a9a7dc3547996c5c816922c"
 +dependencies = [
-+ "getrandom",
++ "getrandom 0.2.15",
 +]
 +
 +[[package]]
@@ -943,63 +1104,77 @@ index 0000000..942397e
 +[[package]]
 +name = "rust-stemmers"
 +version = "1.2.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "e46a2036019fdb888131db7a4c847a1063a7493f971ed94ea82c67eada63ca54"
-+dependencies = [
-+ "serde",
-+ "serde_derive",
-+]
++source = "git+https://github.com/silver-ymz/rust-stemmers.git?rev=51696378e352688b7ffd4fface615370ff5e8768#51696378e352688b7ffd4fface615370ff5e8768"
 +
 +[[package]]
 +name = "rustc-hash"
-+version = "1.1.0"
++version = "2.1.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "08d43f7aa6b08d49f382cde6a7982047c3426db949b1424bc4b7ec9ae12c6ce2"
++checksum = "357703d41365b4b27c590e3ed91eabb1b663f07c4c084095e60cbed4362dff0d"
 +
 +[[package]]
 +name = "rustix"
-+version = "0.38.42"
++version = "0.38.44"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "f93dc38ecbab2eb790ff964bb77fa94faf256fd3e73285fd7ba0903b76bedb85"
++checksum = "fdb5bc1ae2baa591800df16c9ca78619bf65c0488b41b96ccec5d11220d8c154"
 +dependencies = [
 + "bitflags",
 + "errno",
 + "libc",
-+ "linux-raw-sys",
++ "linux-raw-sys 0.4.15",
 + "windows-sys 0.59.0",
 +]
 +
 +[[package]]
++name = "rustix"
++version = "1.0.5"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "d97817398dd4bb2e6da002002db259209759911da105da92bec29ccb12cf58bf"
++dependencies = [
++ "bitflags",
++ "errno",
++ "libc",
++ "linux-raw-sys 0.9.4",
++ "windows-sys 0.59.0",
++]
++
++[[package]]
++name = "rustversion"
++version = "1.0.20"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "eded382c5f5f786b989652c49544c4877d9f015cc22e145a5ea8ea66c2921cd2"
++
++[[package]]
 +name = "ryu"
-+version = "1.0.18"
++version = "1.0.20"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "f3cb5ba0dc43242ce17de99c180e96db90b235b8a9fdc9543c96d2209116bd9f"
++checksum = "28d3b2b1366ec20994f1fd18c3c594f05c5dd4bc44d8bb0c1c632c8d6829481f"
 +
 +[[package]]
 +name = "serde"
-+version = "1.0.217"
++version = "1.0.219"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "02fc4265df13d6fa1d00ecff087228cc0a2b5f3c0e87e258d8b94a156e984c70"
++checksum = "5f0e2c6ed6606019b4e29e69dbaba95b11854410e5347d525002456dbbb786b6"
 +dependencies = [
 + "serde_derive",
 +]
 +
 +[[package]]
 +name = "serde_derive"
-+version = "1.0.217"
++version = "1.0.219"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "5a9bf7cf98d04a2b28aead066b7496853d4779c9cc183c440dbac457641e19a0"
++checksum = "5b0276cf7f2c73365f7157c8123c21cd9a50fbbd844757af28ca1f5925fc2a00"
 +dependencies = [
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
 +name = "serde_json"
-+version = "1.0.134"
++version = "1.0.140"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "d00f4175c42ee48b15416f6193a959ba3a0d67fc699a0db9ad12df9f83991c7d"
++checksum = "20068b6e96dc6c9bd23e01df8827e6c7e1f2fddd43c21810382803c136b99373"
 +dependencies = [
 + "itoa",
 + "memchr",
@@ -1024,24 +1199,33 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "siphasher"
-+version = "0.3.11"
++version = "1.0.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "38b58827f4464d87d377d175e90bf58eb00fd8716ff0a62f80356b5e61555d0d"
++checksum = "56199f7ddabf13fe5074ce809e7d3f42b42ae711800501b5b16ea82ad029c39d"
 +
 +[[package]]
 +name = "sketches-ddsketch"
-+version = "0.2.2"
++version = "0.3.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "85636c14b73d81f541e525f585c0a2109e6744e1565b5c1668e31c70c10ed65c"
++checksum = "c1e9a774a6c28142ac54bb25d25562e6bcf957493a184f15ad4eebccb23e410a"
 +dependencies = [
 + "serde",
 +]
 +
 +[[package]]
++name = "slab"
++version = "0.4.9"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "8f92a496fb766b417c996b9c5e57daf2f7ad3b0bebe1ccfca4856390e3d3bb67"
++dependencies = [
++ "autocfg",
++]
++
++[[package]]
 +name = "smallvec"
-+version = "1.13.2"
++version = "1.15.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "3c5e1a9a646d36c3599cd173a41282daf47c44583ad367b8e6837255952e5c67"
++checksum = "8917285742e9f3e1683f0a9c4e6b57960b7314d0b08d30d1ecd426713ee2eee9"
 +
 +[[package]]
 +name = "stable_deref_trait"
@@ -1067,9 +1251,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "syn"
-+version = "2.0.93"
++version = "2.0.100"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "9c786062daee0d6db1132800e623df74274a0a87322d8e183338e01b3d98d058"
++checksum = "b09a44accad81e1ba1cd74a32461ba89dee89095ba17b32f5d03683b1b1fc2a0"
 +dependencies = [
 + "proc-macro2",
 + "quote",
@@ -1078,14 +1262,14 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "tantivy"
-+version = "0.22.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "f8d0582f186c0a6d55655d24543f15e43607299425c5ad8352c242b914b31856"
++version = "0.23.0"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "aho-corasick",
 + "arc-swap",
 + "base64",
 + "bitpacking",
++ "bon",
 + "byteorder",
 + "census",
 + "crc32fast",
@@ -1095,6 +1279,7 @@ index 0000000..942397e
 + "fnv",
 + "fs4",
 + "htmlescape",
++ "hyperloglogplus",
 + "itertools",
 + "levenshtein_automata",
 + "log",
@@ -1102,7 +1287,6 @@ index 0000000..942397e
 + "lz4_flex",
 + "measure_time",
 + "memmap2",
-+ "num_cpus",
 + "once_cell",
 + "oneshot",
 + "rayon",
@@ -1130,8 +1314,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-bitpacker"
 +version = "0.6.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "284899c2325d6832203ac6ff5891b297fc5239c3dc754c5bc1977855b23c10df"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "bitpacking",
 +]
@@ -1139,8 +1322,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-columnar"
 +version = "0.3.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "12722224ffbe346c7fec3275c699e508fd0d4710e629e933d5736ec524a1f44e"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "downcast-rs",
 + "fastdivide",
@@ -1155,8 +1337,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-common"
 +version = "0.7.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "8019e3cabcfd20a1380b491e13ff42f57bb38bf97c3d5fa5c07e50816e0621f4"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "async-trait",
 + "byteorder",
@@ -1178,13 +1359,15 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "tantivy-go"
-+version = "0.2.0"
++version = "1.0.0"
 +dependencies = [
 + "cbindgen",
++ "crunchy",
 + "env_logger",
 + "lazy_static",
 + "log",
 + "logcall",
++ "phf",
 + "serde",
 + "serde_json",
 + "tantivy",
@@ -1195,8 +1378,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-jieba"
 +version = "0.11.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "0f2fe65c125f0d76d06f0f2ce9fbb9287b53f0dafb51a6270d984a840e2f16c1"
++source = "git+https://github.com/anyproto/tantivy-jieba.git?rev=ca11d3153b8844cbc43cd243667e03f56f6d1e18#ca11d3153b8844cbc43cd243667e03f56f6d1e18"
 +dependencies = [
 + "jieba-rs",
 + "lazy_static",
@@ -1206,8 +1388,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-query-grammar"
 +version = "0.22.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "847434d4af57b32e309f4ab1b4f1707a6c566656264caa427ff4285c4d9d0b82"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "nom",
 +]
@@ -1215,9 +1396,10 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-sstable"
 +version = "0.3.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "c69578242e8e9fc989119f522ba5b49a38ac20f576fc778035b96cc94f41f98e"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
++ "futures-util",
++ "itertools",
 + "tantivy-bitpacker",
 + "tantivy-common",
 + "tantivy-fst",
@@ -1227,8 +1409,7 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-stacker"
 +version = "0.3.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "c56d6ff5591fc332739b3ce7035b57995a3ce29a93ffd6012660e0949c956ea8"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "murmurhash32",
 + "rand_distr",
@@ -1238,50 +1419,49 @@ index 0000000..942397e
 +[[package]]
 +name = "tantivy-tokenizer-api"
 +version = "0.3.0"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "2a0dcade25819a89cfe6f17d932c9cedff11989936bf6dd4f336d50392053b04"
++source = "git+https://github.com/anyproto/tantivy.git?rev=693274a5d4be6da9d069dff4d540162165a99b0e#693274a5d4be6da9d069dff4d540162165a99b0e"
 +dependencies = [
 + "serde",
 +]
 +
 +[[package]]
 +name = "tempfile"
-+version = "3.14.0"
++version = "3.19.1"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "28cce251fcbc87fac86a866eeb0d6c2d536fc16d06f184bb61aeae11aa4cee0c"
++checksum = "7437ac7763b9b123ccf33c338a5cc1bac6f69b45a136c19bdd8a65e3916435bf"
 +dependencies = [
-+ "cfg-if",
 + "fastrand",
++ "getrandom 0.3.2",
 + "once_cell",
-+ "rustix",
++ "rustix 1.0.5",
 + "windows-sys 0.59.0",
 +]
 +
 +[[package]]
 +name = "thiserror"
-+version = "1.0.69"
++version = "2.0.12"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "b6aaf5339b578ea85b50e080feb250a3e8ae8cfcdff9a461c9ec2904bc923f52"
++checksum = "567b8a2dae586314f7be2a752ec7474332959c6460e02bde30d702a66d488708"
 +dependencies = [
 + "thiserror-impl",
 +]
 +
 +[[package]]
 +name = "thiserror-impl"
-+version = "1.0.69"
++version = "2.0.12"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "4fee6c4efc90059e10f81e6d42c60a18f76588c3d74cb83a0b242a2b6c7504c1"
++checksum = "7f7cf42b4507d8ea322120659672cf1b9dbb93f8f2d4ecfd6e51350ff5b17a1d"
 +dependencies = [
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
 +name = "time"
-+version = "0.3.37"
++version = "0.3.41"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "35e7868883861bd0e56d9ac6efcaaca0d6d5d82a2a7ec8209ff492c07cf37b21"
++checksum = "8a7619e19bc266e0f9c5e6686659d394bc57973859340060a69221e57dbc0c40"
 +dependencies = [
 + "deranged",
 + "itoa",
@@ -1294,15 +1474,15 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "time-core"
-+version = "0.1.2"
++version = "0.1.4"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "ef927ca75afb808a4d64dd374f00a2adf8d0fcff8e7b184af886c3c87ec4a3f3"
++checksum = "c9e9a38711f559d9e3ce1cdb06dd7c5b8ea546bc90052da6d06bb76da74bb07c"
 +
 +[[package]]
 +name = "time-macros"
-+version = "0.2.19"
++version = "0.2.22"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "2834e6017e3e5e4b9834939793b282bc03b37a3336245fa820e35e233e2a85de"
++checksum = "3526739392ec93fd8b359c8e98514cb3e8e021beb4e5f597b00a0221f8ed8a49"
 +dependencies = [
 + "num-conv",
 + "time-core",
@@ -1310,9 +1490,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "toml"
-+version = "0.8.19"
++version = "0.8.20"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "a1ed1f98e3fdc28d6d910e6737ae6ab1a93bf1985935a1193e68f93eeb68d24e"
++checksum = "cd87a5cdd6ffab733b2f74bc4fd7ee5fff6634124999ac278c35fc78c6120148"
 +dependencies = [
 + "serde",
 + "serde_spanned",
@@ -1331,9 +1511,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "toml_edit"
-+version = "0.22.22"
++version = "0.22.24"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "4ae48d6208a266e853d946088ed816055e556cc6028c5e8e2b84d9fa5dd7c7f5"
++checksum = "17b4795ff5edd201c7cd6dca065ae59972ce77d1b80fa0a84d94950ece7d1474"
 +dependencies = [
 + "indexmap",
 + "serde",
@@ -1344,9 +1524,9 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "unicode-ident"
-+version = "1.0.14"
++version = "1.0.18"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "adb9e6ca4f869e1180728b7950e35922a7fc6397f7b641499e8f3ef06e50dc83"
++checksum = "5a5f39404a5da50712a4c1eecf25e90dd62b613502b7e925fd4e4d19b5c96512"
 +
 +[[package]]
 +name = "unicode-segmentation"
@@ -1368,11 +1548,11 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "uuid"
-+version = "1.11.0"
++version = "1.16.0"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "f8c5f0a0af699448548ad1a2fbf920fb4bee257eae39953ba95cb84891a0446a"
++checksum = "458f7a779bf54acc9f347480ac654f68407d3aab21269a6e3c9f922acd9e2da9"
 +dependencies = [
-+ "getrandom",
++ "getrandom 0.3.2",
 + "serde",
 +]
 +
@@ -1389,67 +1569,12 @@ index 0000000..942397e
 +checksum = "9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423"
 +
 +[[package]]
-+name = "wasm-bindgen"
-+version = "0.2.99"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "a474f6281d1d70c17ae7aa6a613c87fce69a127e2624002df63dcb39d6cf6396"
-+dependencies = [
-+ "cfg-if",
-+ "once_cell",
-+ "wasm-bindgen-macro",
-+]
-+
-+[[package]]
-+name = "wasm-bindgen-backend"
-+version = "0.2.99"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "5f89bb38646b4f81674e8f5c3fb81b562be1fd936d84320f3264486418519c79"
-+dependencies = [
-+ "bumpalo",
-+ "log",
-+ "proc-macro2",
-+ "quote",
-+ "syn 2.0.93",
-+ "wasm-bindgen-shared",
-+]
-+
-+[[package]]
-+name = "wasm-bindgen-macro"
-+version = "0.2.99"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "2cc6181fd9a7492eef6fef1f33961e3695e4579b9872a6f7c83aee556666d4fe"
-+dependencies = [
-+ "quote",
-+ "wasm-bindgen-macro-support",
-+]
-+
-+[[package]]
-+name = "wasm-bindgen-macro-support"
-+version = "0.2.99"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "30d7a95b763d3c45903ed6c81f156801839e5ee968bb07e534c44df0fcd330c2"
-+dependencies = [
-+ "proc-macro2",
-+ "quote",
-+ "syn 2.0.93",
-+ "wasm-bindgen-backend",
-+ "wasm-bindgen-shared",
-+]
-+
-+[[package]]
-+name = "wasm-bindgen-shared"
-+version = "0.2.99"
-+source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "943aab3fdaaa029a6e0271b35ea10b72b943135afe9bffca82384098ad0e06a6"
-+
-+[[package]]
-+name = "web-sys"
-+version = "0.3.76"
++name = "wasi"
++version = "0.14.2+wasi-0.2.4"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "04dd7223427d52553d3702c004d3b2fe07c148165faa56313cb00211e31c12bc"
++checksum = "9683f9a5a998d873c0d21fcbe3c083009670149a8fab228644b8bd36b2c48cb3"
 +dependencies = [
-+ "js-sys",
-+ "wasm-bindgen",
++ "wit-bindgen-rt",
 +]
 +
 +[[package]]
@@ -1558,21 +1683,38 @@ index 0000000..942397e
 +
 +[[package]]
 +name = "winnow"
-+version = "0.6.20"
++version = "0.7.6"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "36c1fec1a2bb5866f07c25f68c26e565c4c200aebb96d7e55710c19d3e8ac49b"
++checksum = "63d3fcd9bba44b03821e7d699eeee959f3126dcc4aa8e4ae18ec617c2a5cea10"
 +dependencies = [
 + "memchr",
 +]
 +
 +[[package]]
++name = "wit-bindgen-rt"
++version = "0.39.0"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "6f42320e61fe2cfd34354ecb597f86f413484a798ba44a8ca1165c58d42da6c1"
++dependencies = [
++ "bitflags",
++]
++
++[[package]]
 +name = "zerocopy"
 +version = "0.7.35"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
 +checksum = "1b9b4fd18abc82b8136838da5d50bae7bdea537c574d8dc1a34ed098d6c166f0"
 +dependencies = [
-+ "byteorder",
-+ "zerocopy-derive",
++ "zerocopy-derive 0.7.35",
++]
++
++[[package]]
++name = "zerocopy"
++version = "0.8.24"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "2586fea28e186957ef732a5f8b3be2da217d65c5969d4b1e17f973ebbe876879"
++dependencies = [
++ "zerocopy-derive 0.8.24",
 +]
 +
 +[[package]]
@@ -1583,33 +1725,47 @@ index 0000000..942397e
 +dependencies = [
 + "proc-macro2",
 + "quote",
-+ "syn 2.0.93",
++ "syn 2.0.100",
++]
++
++[[package]]
++name = "zerocopy-derive"
++version = "0.8.24"
++source = "registry+https://github.com/rust-lang/crates.io-index"
++checksum = "a996a8f63c5c4448cd959ac1bab0aaa3306ccfd060472f85943ee0750f0169be"
++dependencies = [
++ "proc-macro2",
++ "quote",
++ "syn 2.0.100",
 +]
 +
 +[[package]]
 +name = "zstd"
-+version = "0.13.2"
++version = "0.13.3"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "fcf2b778a664581e31e389454a7072dab1647606d44f7feea22cd5abb9c9f3f9"
++checksum = "e91ee311a569c327171651566e07972200e76fcfe2242a4fa446149a3881c08a"
 +dependencies = [
 + "zstd-safe",
 +]
 +
 +[[package]]
 +name = "zstd-safe"
-+version = "7.2.1"
++version = "7.2.4"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "54a3ab4db68cea366acc5c897c7b4d4d1b8994a9cd6e6f841f8964566a419059"
++checksum = "8f49c4d5f0abb602a93fb8736af2a4f4dd9512e36f7f570d66e65ff867ed3b9d"
 +dependencies = [
 + "zstd-sys",
 +]
 +
 +[[package]]
 +name = "zstd-sys"
-+version = "2.0.13+zstd.1.5.6"
++version = "2.0.15+zstd.1.5.7"
 +source = "registry+https://github.com/rust-lang/crates.io-index"
-+checksum = "38ff0f21cfee8f97d94cef41359e0c89aa6113028ab0291aa8ca0038995a95aa"
++checksum = "eb81183ddd97d0c74cedf1d50d85c8d08c1b8b68ee863bdee9e706eedba1a237"
 +dependencies = [
 + "cc",
 + "pkg-config",
 +]
+-- 
+2.48.1
+
diff --git a/pkgs/by-name/ta/tantivy-go/package.nix b/pkgs/by-name/ta/tantivy-go/package.nix
index 53cbb9e750856e..0f839fdce3cf82 100644
--- a/pkgs/by-name/ta/tantivy-go/package.nix
+++ b/pkgs/by-name/ta/tantivy-go/package.nix
@@ -6,17 +6,17 @@
 
 rustPlatform.buildRustPackage rec {
   pname = "tantivy-go";
-  version = "0.3.1";
+  version = "1.0.1";
 
   src = fetchFromGitHub {
     owner = "anyproto";
     repo = "tantivy-go";
     tag = "v${version}";
-    hash = "sha256-IlGtyTjOAvmrbgmvy4NelTOgOWopxNta3INq2QcMEqY=";
+    hash = "sha256-iTGIm5C7SMBZv2OcKCQCyEZS/eeMJQ5nFSpuFJbTEXU=";
   };
 
   useFetchCargoVendor = true;
-  cargoHash = "sha256-3+HtZ7SAnvTNXtYlokX/Z9VD1lDw+nh6R/njYOZeGoE=";
+  cargoHash = "sha256-f8xI4g6MK4NUn0DpxD+miaCzBe8FSSqaL5rpjoqUGfY=";
 
   cargoPatches = [
     ./add-Cargo.lock.patch

From e2768802eb3a90474ba37d94b4147a854e71699b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?David=20Chocholat=C3=BD?= <chocholaty.david@protonmail.com>
Date: Fri, 18 Apr 2025 12:52:32 +0200
Subject: [PATCH 2/3] anytype-heart: 0.39.11 -> 0.40.16

---
 pkgs/by-name/an/anytype-heart/package.nix | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/pkgs/by-name/an/anytype-heart/package.nix b/pkgs/by-name/an/anytype-heart/package.nix
index 6b2f2472a473ed..76316e88978187 100644
--- a/pkgs/by-name/an/anytype-heart/package.nix
+++ b/pkgs/by-name/an/anytype-heart/package.nix
@@ -11,12 +11,12 @@
 
 let
   pname = "anytype-heart";
-  version = "0.39.11";
+  version = "0.40.16";
   src = fetchFromGitHub {
     owner = "anyproto";
     repo = "anytype-heart";
     tag = "v${version}";
-    hash = "sha256-+H63bc4aJPERfclzKh4E3uYEEwNycLfe0BCPSlilqCc=";
+    hash = "sha256-HJd8qvKeQTVh2yUUNx48f6LSA34QjpczS09lxjftgFk=";
   };
 
   arch =
@@ -34,7 +34,7 @@ in
 buildGoModule {
   inherit pname version src;
 
-  vendorHash = "sha256-fbZ1DiRcD9dnS8e7BMrKPYApqZmQbaH6DsSSO1knDmo=";
+  vendorHash = "sha256-q04bUuW/r1LQMFrLozzDDTW5/kc4+e63FetIa/oJmfs=";
 
   subPackages = [ "cmd/grpcserver" ];
   tags = [

From c5cb5f5451ab18f59ec968421d43279d82503345 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?David=20Chocholat=C3=BD?= <chocholaty.david@protonmail.com>
Date: Fri, 18 Apr 2025 12:53:30 +0200
Subject: [PATCH 3/3] anytype: 0.45.3 -> 0.46.1

---
 pkgs/by-name/an/anytype/package.nix | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/pkgs/by-name/an/anytype/package.nix b/pkgs/by-name/an/anytype/package.nix
index d6a5bea3143ed4..a9a552dc3d3345 100644
--- a/pkgs/by-name/an/anytype/package.nix
+++ b/pkgs/by-name/an/anytype/package.nix
@@ -15,27 +15,27 @@
 
 let
   pname = "anytype";
-  version = "0.45.3";
+  version = "0.46.1";
 
   src = fetchFromGitHub {
     owner = "anyproto";
     repo = "anytype-ts";
     tag = "v${version}";
-    hash = "sha256-fwfxmNca75xAAHKeT2nddz+XZexDomzHbw188LXxZqA=";
+    hash = "sha256-S8X8NTj5LCGoWasRbYZ3gdDoi1oi6/Ji/hYH1+q7HMc=";
   };
   description = "P2P note-taking tool";
 
   locales = fetchFromGitHub {
     owner = "anyproto";
     repo = "l10n-anytype-ts";
-    rev = "687106c4e37297f86fab79f77ef83599b61ab65c";
-    hash = "sha256-Y0irD0jzqYobnjtD2M1+hTDRUUYnuygUx9+tE1gUoTw=";
+    rev = "89343848ff6e2bc655afa3c5a1d905fbc47197c5";
+    hash = "sha256-Px6orAg7Lf05XXHKTznMwu/AlLsV23i+CdKT0T7r2Iw=";
   };
 in
 buildNpmPackage {
   inherit pname version src;
 
-  npmDepsHash = "sha256-9BI+rXzTYonlMhcH8uiWyyF18JGv8GL1U9hZ9Z6X3As=";
+  npmDepsHash = "sha256-pmPg/idU3RK9TtaKy2AE/rYYumIUMd/EG01/QPq2aPg=";
 
   env = {
     ELECTRON_SKIP_BINARY_DOWNLOAD = "1";